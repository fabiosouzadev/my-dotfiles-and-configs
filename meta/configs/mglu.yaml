- shell:
    - command: '[ -f "$HOME/.ssh/id_ed25519_luizalabs" ]  || cp mglu/id_ed25519_luizalabs ~/.ssh/id_ed25519_luizalabs'
    - command: '[ -f "$HOME/.ssh/id_ed25519_luizalabs.pub" ]  || cp mglu/id_ed25519_luizalabs.pub ~/.ssh/id_ed25519_luizalabs.pub'
    - [ chmod 400 ~/.ssh/id_ed25519_luizalabs]
    - [ chmod 400 ~/.ssh/id_ed25519_luizalabs.pub]
    - command: '[ -d "$HOME/.kube" ]  || mkdir $HOME/.kube'
    - description: Validating sudo credentials
      command: "sudo --validate"
    - description: Install remmina
      command: |
        sudo pacman -Syu --noconfirm \
          remmina \
          freerdp
    - description: Install globalprotect
      command: |
        sudo pacman -Syu --noconfirm globalprotect-openconnect
    - description: Install forticlient
      command: |
        case $(lsb_release -is) in 

          Ubuntu)
            wget -O - https://repo.fortinet.com/repo/6.4/ubuntu/DEB-GPG-KEY | sudo apt-key add -
            echo 'deb [arch=amd64] https://repo.fortinet.com/repo/6.4/ubuntu/ /bionic multiverse' |  sudo tee /etc/apt/sources.list.d/forticlient.list 

            sudo apt-get update
            sudo apt install -y forticlient
          ;;

          Arch | EndeavourOS)
            yay -S forticlientsslvpn --nocleanmenu --noconfirm --nodiffmenu
          ;; 
        esac
    - command: '[ -d "/etc/openfortivpn/" ]  && sudo cp mglu/vpnhub /etc/openfortivpn'

- link:
    ~/.gitconfig_mglu: mglu/gitconfig_mglu 
    ~/.kube/eks-development.yaml: mglu/kube/eks-development.yaml
    ~/.kube/eks-hml-pagamentos.yaml: mglu/kube/eks-hml-pagamentos.yaml
    ~/.kube/eks-prd-pagamentos.yaml: mglu/kube/eks-prd-pagamentos.yaml
    ~/.kube/eks-production.yaml: mglu/kube/eks-production.yaml
    ~/.zshrc.d/200-mglu.zsh: mglu/200-mglu.zsh
